### tcp/ip 封装流程


当应用程序用TCP传送数据时， 数据被送入协议栈中， 然后逐个通过每一层直到被当作一串比特流送入网络。其中每一层对收到的数据都要增加一些首部信息(或尾部信息
).

![封装过程](http://www.weeqoo.com/uploadfile/2009/11/11/2009111111061510422.jpg)

 - TCP传给IP的数据单元称做TCP报文或简称为TCP段. 
 - IP传给网络接口层的数据单元称作IP数据报。
 - 通过以太网传输的比特流称作帧。


 - UDP数据与TCP数据基本一致。唯一的不同是UDP传给IP的信息单元称作UDP数据报， 而且UDP的首部长为8字节


![图2](http://www.weeqoo.com/uploadfile/2009/11/11/200911111106428605.jpg)

 -由图2可知，tcp、udp、icmp、igmp、都要向IP传送数据，因此ip必须在ip首部中加入某种标识， 以表明数据属于那一层
 - 类似， 许多应用程序都可以使用tcp或udp来传送数据。运输层协议在生成报文首部时需要存入一个应用程序的标识符。TCP和UDP都用一个16bit的端口号来表示不同的应用程序。TCP和UDP把源端口号和目的端口号分别存入报文首部中。
 - 网络接口分别要发送和接收IP、ARP和RARP数据，因此也必须在以太网的帧首部加入标识， 以指明生成数据的网络协议。



